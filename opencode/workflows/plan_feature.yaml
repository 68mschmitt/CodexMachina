name: plan_feature
version: 1
description: Plan a feature by creating RFC, test plan, and architecture decisions.

inputs:
  - tickets/{{feature}}.json
  - docs/ARCH.md

outputs:
  - docs/RFCs/{{feature}}/RFC.md
  - docs/RFCs/{{feature}}/TestPlan.md
  - docs/RFCs/{{feature}}/OPTIONS.md
  - docs/RFCs/{{feature}}/ARCHITECTURE.md

agents:
  - use: Facilitator
  - use: Planner
  - use: Architect
  - use: ConstraintsKeeper
  - use: DocWriter

tools:
  - repo.search
  - repo.map

preset: strict

gates:
  - run.lint: pass
  - adr_required:
      when_touching: ["api/*", "schemas/*"]

variables:
  feature: null

context:
  - style: packs/style/STYLE.md
  - arch: docs/ARCH.md
  - glossary: packs/glossary/Domain.md
